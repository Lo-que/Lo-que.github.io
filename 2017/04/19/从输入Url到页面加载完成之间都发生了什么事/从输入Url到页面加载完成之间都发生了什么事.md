---
title: 从输入Url到页面加载完成之间都发生了什么事
date: 2017-04-19 19:20:27
tags: Learning Note
---

# Learnning Note
## 从输入Url到页面加载完成之间都发生了什么事
1. chrome搜索自身的dns缓存
2. 搜索操作系统自身的dns缓存（浏览器没有找抖缓存或缓存已经失效）
3. 读取本地的HOST文件
4. 浏览器发起一个dns的系统调用
    1. 宽带运营商服务器查看本身缓存
    2. 运营商服务器发起一个迭代dns解析的请求
    3. 运营商-根域-com域的顶级域-com域（域名的注册商提供）
    4. 运营商服务器吧结果返回操作系统内核同时缓存起来
    5. 操作系统内核把结果返回浏览器
    6. 最终由浏览器拿到
5. 浏览器获得域名对应的ip地址后，发起HTTP三次握手
6. tcp／ip连接建立起来后，浏览器就可以向服务器发送HTTP请求了
7. 服务器端接受到了这个请求，根据路径参数，经过后段的一些处理之后，把处理后的一个结果的数据返回给浏览器html
8. 浏览器拿到html  剩下的css js 图片之类的资源都要经过以上7步
9. 浏览器根据拿到的资源对画面进行渲染

 **请求和响应 都会发送http头和正文信息**

google一下发现大神文章[从输入url到页面加载完成之间都发生了什么](http://fex.baidu.com/blog/2014/05/what-happen/)

**更简洁的理解**
1. 浏览器检查缓存，如果请求的对象缓存是新的，跳到# 9
2. 浏览器询问操作系统服务器的IP地址
3. 操作系统进行DNS查找并将IP地址回复到浏览器
4. 浏览器打开一个TCP连接到服务器（这一步要复杂得多）
5. 浏览器通过TCP连接发送HTTP请求
6. 浏览器接收HTTP响应，并可能关闭TCP连接，或为另一个请求重用它。
7. 浏览器检查响应是否是一个重定向或条件反应（3xx结果状态码），授权请求（401），错误（4xx和5XX），等等；这些不同于正常的反应处理（2xx）
8. 如果缓存，响应存储在高速缓存
9. 浏览器解码响应（不考虑gzip压缩）
10. 浏览器决定如何处理响应（例如它是一个HTML页面，它是一个图像，它是一个声音剪辑吗？）
11. 浏览器呈现响应，或提供未识别类型的下载对话框。

**此外，还有很多其他的事情发生在平行于这个（地址，输入处理投机性预取，增加网页浏览历史，用户，显示进度通知插件和扩展，渲染页面的同时它的下载，流水线，为保持活着，检查恶意内容等跟踪连接）和整个操作得到的幅度更复杂的命令（HTTPS证书和密码以及ssl pining)**